<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VeriLex – Akten-Detail</title>
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#1f3c88" />
    <link rel="stylesheet" href="assets/css/styles.css" />
  </head>
  <body>
    <header class="app-header">
      <h1>VeriLex Demo</h1>
      <p class="app-subtitle">Aktenhistorie &amp; Timeline</p>
    </header>

    <main class="app-main case-detail-main" aria-live="polite">
      <nav class="case-breadcrumb" aria-label="Brotkrumen">
        <a class="case-breadcrumb__link" href="index.html">&larr; Zur Aktenübersicht</a>
      </nav>

      <section
        class="case-card case-detail-card"
        aria-labelledby="case-detail-title"
        data-visible-for="partner,associate"
      >
        <header class="case-detail-card__header">
          <div>
            <p id="case-number" class="case-detail__number" aria-live="polite"></p>
            <h2 id="case-detail-title" class="case-detail__title"></h2>
          </div>
          <div class="case-detail__status-group">
            <span id="case-status" class="case-status-pill" role="status"></span>
            <span id="case-priority" class="case-status-pill case-status-pill--muted"></span>
          </div>
        </header>

        <div class="case-detail-layout">
          <aside class="case-sidebar" aria-label="Akteninformationen">
            <section class="case-sidebar__section">
              <h3 class="case-sidebar__heading">Mandant &amp; Team</h3>
              <dl class="case-sidebar__meta">
                <div>
                  <dt>Mandant</dt>
                  <dd id="case-client"></dd>
                </div>
                <div>
                  <dt>Verantwortliche Person</dt>
                  <dd id="case-responsible"></dd>
                </div>
                <div>
                  <dt>Rechtsgebiet</dt>
                  <dd id="case-practice"></dd>
                </div>
                <div>
                  <dt>Letzte Aktualisierung</dt>
                  <dd id="case-updated"></dd>
                </div>
              </dl>
            </section>

            <section class="case-sidebar__section">
              <h3 class="case-sidebar__heading">Tags</h3>
              <div id="case-tags" class="case-tags" role="list"></div>
            </section>

            <section class="case-sidebar__section">
              <h3 class="case-sidebar__heading">Nächste Schritte</h3>
              <ul id="case-next-steps" class="case-next-steps"></ul>
            </section>
          </aside>

          <section class="case-timeline" aria-labelledby="case-timeline-title">
            <header class="case-timeline__header">
              <div>
                <h3 id="case-timeline-title">Timeline</h3>
                <p id="case-timeline-summary" class="case-timeline__summary"></p>
              </div>
              <div class="case-timeline__filters" role="group" aria-label="Timeline filtern">
                <button type="button" class="timeline-filter timeline-filter--active" data-filter="all">
                  Alle Ereignisse
                </button>
                <button type="button" class="timeline-filter" data-filter="document">Dokumente</button>
                <button type="button" class="timeline-filter" data-filter="deadline">Fristen</button>
                <button type="button" class="timeline-filter" data-filter="note">Notizen</button>
                <button type="button" class="timeline-filter" data-filter="activity">Aktivitäten</button>
              </div>
            </header>

            <ol id="case-timeline-list" class="timeline-list"></ol>
            <p id="case-timeline-empty" class="timeline-empty" hidden>
              Für den ausgewählten Filter sind keine Timeline-Einträge vorhanden.
            </p>
          </section>
        </div>
      </section>
    </main>

    <section class="role-access-message" data-visible-for="assistant,accounting">
      <h2>Aktenhistorie vertraulich</h2>
      <p>
        Die Timeline steht nur Partner:innen und Associates zur Verfügung. Wechseln Sie oben die Rolle,
        um die Aktenhistorie einzusehen.
      </p>
    </section>

    <div
      id="global-error-overlay"
      class="error-overlay"
      role="alertdialog"
      aria-modal="true"
      aria-labelledby="error-overlay-title"
      aria-describedby="error-overlay-message"
      hidden
    >
      <div class="error-overlay__content" role="document">
        <header class="error-overlay__header">
          <h2 id="error-overlay-title">Ein unerwarteter Fehler ist aufgetreten</h2>
          <button
            type="button"
            class="error-overlay__close"
            aria-label="Fehlermeldung schließen"
            data-error-action="dismiss"
          >
            ×
          </button>
        </header>
        <div id="error-overlay-message" class="error-overlay__message"></div>
        <details class="error-overlay__details" hidden>
          <summary>Technische Details einblenden</summary>
          <pre id="error-overlay-details"></pre>
        </details>
        <footer class="error-overlay__footer">
          <button type="button" class="btn" data-error-action="reload">
            Seite neu laden
          </button>
          <button type="button" class="btn btn-secondary" data-error-action="dismiss">
            Schließen
          </button>
        </footer>
      </div>
    </div>

    <script src="assets/js/app.js" type="module"></script>
    <script src="assets/js/case-detail.js" type="module"></script>
  </body>
</html>
